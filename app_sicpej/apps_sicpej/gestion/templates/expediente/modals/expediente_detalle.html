<div class="modal fade" id="modalPreview" tabindex="-1" aria-labelledby="modalPreviewLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header text-white">
        <h5 class="modal-title" id="modalPreviewLabel">
          Detalle del Expediente [[ modalData.expediente_toca || '' ]]
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>

      <div class="modal-body">
        <div v-if="Object.keys(modalData).length">

          <!-- Nav Tabs -->
          <div class="nav-align-top nav-tabs-shadow mb-4">
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button type="button" class="nav-link active" data-bs-toggle="tab" data-bs-target="#tab-general" role="tab">
                  General
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-relaciones" role="tab">
                  Paquete
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-cuadernillos" role="tab">
                  Cuadernillos
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-acumulados" role="tab">
                  Acumulados
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button type="button" class="nav-link" data-bs-toggle="tab" data-bs-target="#tab-avocamientos" role="tab">
                  Avocamientos
                </button>
              </li>
            </ul>
          </div>

          <!-- Contenido de cada tab -->
          <div class="tab-content">

            <!-- TAB: GENERAL -->
            <div class="tab-pane fade show active" id="tab-general" role="tabpanel">
              <div class="row g-3">
                
                <!-- üìå Datos B√°sicos -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">üìå Datos B√°sicos</h6>
                      <p><strong>Observaciones:</strong> [[ modalData.observaciones ]]</p>
                      <p><strong>Expediente:</strong> [[ modalData.expediente_toca ]]</p>
                      <p><strong>Estatus:</strong> [[ modalData.estatus_display ]]</p>
                    </div>
                  </div>
                </div>

                <!-- üìÖ Fechas -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">üìÖ Fechas</h6>
                      <p><strong>Fecha de registro:</strong> [[ modalData.fecha_registro ]]</p>
                      <p><strong>Inicio:</strong> [[ modalData.fecha_inicio ]]</p>
                      <p><strong>Sentencia:</strong> [[ modalData.fecha_sentencia ]]</p>
                      <p><strong>Archivo:</strong> [[ modalData.fecha_archivo ]]</p>
                      <p><strong>Convenio:</strong> [[ modalData.fecha_convenio ]]</p>
                      <p><strong>Ejecutoria:</strong> [[ modalData.fecha_ejecutoria ]]</p>
                    </div>
                  </div>
                </div>

                <!-- ‚öñÔ∏è Datos del Juicio -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">‚öñÔ∏è Datos del Juicio</h6>
                      <p><strong>Juicio / Delito:</strong> [[ modalData.juicio_delito ]]</p>
                      <p><strong>Actor:</strong> [[ modalData.actor ]]</p>
                      <p><strong>Demandado:</strong> [[ modalData.demandado ]]</p>
                      <p><strong>Beneficiario:</strong> [[ modalData.beneficiario ]]</p>
                    </div>
                  </div>
                </div>

                <!-- üë©‚Äç‚öñÔ∏è Personal -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">üë©‚Äç‚öñÔ∏è Personal</h6>
                      <p><strong>Juez:</strong> [[ modalData.juez ]]</p>
                      <p><strong>Secretario:</strong> [[ modalData.secretario ]]</p>
                    </div>
                  </div>
                </div>

                <!-- üìÅ Tomos y Folios -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">üìÅ Tomos y Folios</h6>
                      <p><strong>N√∫mero de tomo:</strong> [[ modalData.numero_tomo ]]</p>
                      <p><strong>Rango folio inicial:</strong> [[ modalData.rango_folio_inicial ]]</p>
                      <p><strong>Rango folio final:</strong> [[ modalData.rango_folio_final ]]</p>
                    </div>
                  </div>
                </div>

                <!-- ‚öôÔ∏è Otros -->
                <div class="col-md-6">
                  <div class="card shadow-sm border-0 h-100">
                    <div class="card-body">
                      <h6 class="card-title mb-3">‚öôÔ∏è Otros</h6>
                      <p><strong>Original:</strong> [[ modalData.original ? 'S√≠' : 'No' ]]</p>
                      <p><strong>Duplicado:</strong> [[ modalData.duplicado ? 'S√≠' : 'No' ]]</p>
                      <p><strong>Concluido:</strong> [[ modalData.concluido ? 'S√≠' : 'No' ]]</p>
                      <p><strong>Fecha concluido:</strong> [[ modalData.fecha_concluido ]]</p>
                    </div>
                  </div>
                </div>

              </div>
            </div>


            <!-- TAB: RELACIONES -->
            <div class="tab-pane fade" id="tab-relaciones" role="tabpanel">
              <h6>üì¶ Paquete</h6>
              <p>Clave paquete: [[ modalData.paquete.clave_paquete ]]</p>
              <p>Clasificaci√≥n de paquete: [[ modalData.paquete.clasificacion_paquete ]]</p>

              <h6>üèõÔ∏è Instancia</h6>
              <p>[[ modalData.instancia?.nombre ]]</p>

              <h6>‚öñÔ∏è √ìrgano Jurisdiccional</h6>
              <p>[[ modalData.organo_jurisdiccional?.descripcion ]], [[ modalData.organo_jurisdiccional?.municipio.descripcion ]]</p>

            </div>

            <!-- TAB: CUADERNILLOS -->
            <div class="tab-pane fade" id="tab-cuadernillos" role="tabpanel">
              <ul>
                <li v-for="c in modalData.cuadernillos" :key="c.id">
                  <span>Tipo: [[ c.tipo ]] </span><br>
                  <span>Rango inicial: [[ c.rango_inicial ]] / Rango final: [[ c.rango_final ]]</span>
                  <hr>
                </li>
              </ul>
            </div>

            <!-- TAB: ACUMULADOS -->
            <div class="tab-pane fade" id="tab-acumulados" role="tabpanel">
              <ul>
                <li v-for="a in modalData.acumulados" :key="a.id">
                  <span>Expediente: [[ a.numero_expediente ]]</span> <br>
                  <span>√ìrgano jurisdiccional: [[ a.organo_jurisdiccional_detalle?.nombre ]], [[ a.organo_jurisdiccional_detalle?.municipio.descripcion ]]</span> <br>
                  <span>Rango inicial: [[ a.rango_inicial ]] / Rango final: [[ a.rango_final ]]</span>
                  <hr>
                </li>
              </ul>
            </div>

            <!-- TAB: AVOCAMIENTOS -->
            <div class="tab-pane fade" id="tab-avocamientos" role="tabpanel">
              <ul>
                <li v-for="av in modalData.avocamientos" :key="av.id">
                  <span>Expediente: [[ av.numero_expediente ]]</span> <br>
                  <span>Rango inicial: [[ av.rango_inicial ]] / Rango final: [[ av.rango_final ]]</span> <br>
                  <span>√ìrgano jurisdiccional: [[ av.organo_jurisdiccional_detalle?.nombre ]], [[ av.organo_jurisdiccional_detalle?.municipio.descripcion ]]</span>
                  <hr>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <div v-else class="text-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Cargando...</span>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>
